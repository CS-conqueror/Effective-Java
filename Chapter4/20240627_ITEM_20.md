## **μ¶”μƒ ν΄λμ¤ vs μΈν„°νμ΄μ¤**

- μ¶”μƒν΄λμ¤ - λ‹¤μ¤‘ μƒμ†μ΄ λ¶κ°€λ¥, κµ¬ν„μ²΄μ™€ μƒμ„-ν•μ„ ν΄λμ¤ κ΄€κ³„λ¥Ό κ°–λ”λ‹¤.
- μΈν„°νμ΄μ¤ - λ‹¤μ¤‘ μƒμ†μ΄ κ°€λ¥, κµ¬ν„ν• ν΄λμ¤μ™€ κ°™μ€ νƒ€μ…μΌλ΅ μ·¨κΈ‰λλ‹¤.

**[μ¶”μƒν΄λμ¤κ°€ κ°–κ³  μμ§€ μ•μ€ μΈν„°νμ΄μ¤μ μ¥μ ]**

1. **κΈ°μ΅΄ ν΄λμ¤μ— μ†μ‰½κ² μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μλ‹¤.**

Comparable, Iterable, AutoCloseable μΈν„°νμ΄μ¤κ°€ μƒλ΅­κ² μ¶”κ°€ λμ—μ„ λ• ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬μ κΈ°μ΅΄ ν΄λμ¤κ°€ μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• μ±„λ΅ λ¦΄λ¦¬μ¦ λλ‹¤.

1. **μΈν„°νμ΄μ¤λ” λ―Ήμ¤μΈmixin μ •μμ— μ•μ„±λ§μ¶¤μ΄λ‹¤.**

νΌν•©μ΄λΌλ” λ»μ„ κ°€μ§€κ³  μλ” λ―Ήμ¤μΈμ€, λ―Ήμ¤μΈμ„ κµ¬ν„ν•  ν΄λμ¤μ— μ›λμ β€μ£Ό νƒ€μ…β€™ μ™Έμ— νΉμ • μ„ νƒμ  ν–‰μ„λ¥Ό μ κ³µν•λ‹¤κ³  μ„ μ–Έν•λ” ν¨κ³Όλ¥Ό μ¤€λ‹¤.

μ¶”μƒ ν΄λμ¤λ΅λ” λ―Ήμ¤μΈμ„ μ •μν•  μ μ—†λ‹¤. κ·Έ μ΄μ λ” κΈ°μ΅΄ ν΄λμ¤μ— λΌμ›λ„£μ„ μ μ—†κΈ° λ•λ¬Έμ΄λ‹¤. ν΄λμ¤λ” λ‘ λ¶€λ¨λ¥Ό κ°€μ§ μ μ—†κ³ , ν΄λμ¤ κ³„μΈµκµ¬μ΅°μ—λ” λ―Ήμ¤μΈμ„ μ‚½μ…ν•κΈ°μ— ν•©λ¦¬μ μΈ μ„μΉκ°€ μ—†κΈ° λ•λ¬Έμ΄λ‹¤.

1. **κ³„μΈµκµ¬μ΅° μ—†λ” νƒ€μ… ν”„λ μ„μ›ν¬λ¥Ό λ§λ“¤ μ μλ‹¤.**

λ¬Όλ΅  κ³„μΈµμ΄ μ μ ν• κ°λ…λ„ μ΅΄μ¬ν•μ§€λ§, ν„μ‹¤μ—λ” κ³„μΈµμ„ μ—„κ²©ν κµ¬λ¶„ν•κΈ° μ–΄λ ¤μ΄ κ°λ…λ„ μλ‹¤. μ±…μ— λ“±μ¥ν•λ” Singer, Songwriter μΈν„°νμ΄μ¤λ¥Ό μƒκ°ν•΄λ³΄μ.

```java
public interface Singer {
	AudioClip sing(Song s);
}

public interface Songwriter {
	Song compose(int chartPosition);
}
```

ν„μ‹¤μ—λ” μ‹±μ–΄μ†΅λΌμ΄ν„°λ„ μμΌλ―€λ΅, ν•΄λ‹Ή κ°λ…μ„ κµ¬ν„ν•λ ¤λ©΄ λ‹¤μμ²λΌ μƒλ΅μ΄ κ³„μΈµμ„ λ§λ“¤λ©΄ λλ‹¤.

μΈν„°νμ΄μ¤λ” λ‹¤μ¤‘μƒμ†μ΄ κ°€λ¥ν•μ§€λ§, μ¶”μƒν΄λμ¤μ—μ„λ” λ‹¤μ¤‘μƒμ†μ΄ λ¶κ°€ν•λ―€λ΅ μ¶”μƒν΄λμ¤μ—μ„  κµ¬ν„ν•κΈ° μ–΄λ ¤μ΄ λ¶€λ¶„μ΄λ‹¤.

```java
public interface SingerSongwriter extends Singer, Songwriter {
	AudioClip strum();
	void actSensitive();
}
```

## **λ””ν΄νΈ λ©”μ„λ“**

λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¨μ•Όν•λ” μ΄μ μ™€ κ°λ… μ†κ°:

https://velog.io/@heoseungyeon/λ””ν΄νΈ-λ©”μ„λ“Default-Method

μΈν„°νμ΄μ¤μ—μ„ λ©”μ„λ“λ¥Ό μ„ μ–Έν•  λ•, κ·Έ λ©”μ„λ“μ κΈ°λ³Έμ μΈ κµ¬ν„ λ°©λ²•μ΄ λ…ν™•ν•λ‹¤λ©΄ ν•΄λ‹Ή λ©”μ„λ“λ¥Ό λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•  μ μλ‹¤. λ””ν΄νΈ λ©”μ„λ“λ” μƒμ†ν•λ ¤λ” μ‚¬λμ„ μ„ν•΄ @implSpec μλ°”λ… νƒκ·Έλ¥Ό ν™μ©ν•λ©΄ μΆ‹λ‹¤.

μΈν„°νμ΄μ¤ νΉμ§• : μΈμ¤ν„΄μ¤ ν•„λ“λ¥Ό ν™μ©ν•  μ μ—†κ³ , privateν•μ§€ μ•μ€ μ •μ  λ©¤λ²„λ„ κ°€μ§ μ μ—†λ‹¤λ” ν•κ³„κ°€ μλ‹¤.

λ””ν΄νΈλ©”μ„λ“λ” μΈν„°νμ΄μ¤ μ•μ—λ§ μ‚¬μ©μ΄ λλ‹κΉ μ΄λ¬ν• λ‹¨μ μ΄ λ°μƒ 

## **μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤**

- μ¶”μƒ ν΄λμ¤μ²λΌ κµ¬ν„μ„ λ„μ™€μ¤
- μ¶”μƒ ν΄λμ¤λ΅ νƒ€μ…μ„ μ •μν•  λ•μ μ μ•½μ—μ„ λ²—μ–΄λ‚¨

λ””ν΄νΈ λ©”μ„λ“κ°€ κ°€μ§€κ³  μλ” λ‹¨μ μ„ κ·Ήλ³µν•κΈ° μ„ν•΄, μΈν„°νμ΄μ¤μ™€ μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν•¨κ» μ κ³µν•λ” λ°©μ‹μΌλ΅ μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤μ μ¥μ μ„ λ¨λ‘ μ·¨ν•  μ λ„ μλ‹¤. 

<aside>
π’΅ **μΈν„°νμ΄μ¤λ΅λ” νƒ€μ…μ„ μ •μν•κ³ , κ³¨κ²© κµ¬ν„ ν΄λμ¤λ” λ‚λ¨Έμ§€ λ©”μ„λ“λ¥Ό κµ¬ν„ν•λ‹¤.**

μ΄λ¥Ό **ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄** μ΄λΌ λ¶€λ¥Έλ‹¤.

</aside>

κ΄€λ΅€μƒ μΈν„°νμ΄μ¤ μ΄λ¦„μ΄Β `Interface`λΌλ©΄ κ³¨κ²© κµ¬ν„ ν΄λμ¤ μ΄λ¦„μ€Β `AbstractInterface`λ΅ μ§“λ”λ‹¤.
**[AbstractList κ³¨κ²©κµ¬ν„μ„ μ‚¬μ©ν•΄ μ™„μ„±ν• κµ¬μ²΄ ν΄λμ¤]**

```java
static List<Integer> intArrayAsList(int[] a) {
    Objects.requireNonNull(a);

    // λ‹¤μ΄μ•„λ¬λ“ μ—°μ‚°μλ¥Ό μ΄λ ‡κ² μ‚¬μ©ν•λ” κ±΄ μλ°” 9λ¶€ν„° κ°€λ¥ν•λ‹¤.
    // λ” λ‚®μ€ λ²„μ „μ„ μ‚¬μ©ν•λ‹¤λ©΄ <Integer>λ΅ μμ •ν•μ.
    return new AbstractList<>() {
        @Override
        public Integer get(int i) {
            return a[i]; // μ¤ν† λ°•μ‹±
        }

        @Override
        public Integer set(int i, Integer val) {
            int oldVal = a[i];
            a[i] = val; // μ¤ν† μ–Έλ°•μ‹±  Integer ->int
            return oldVal; // μ¤ν† λ°•μ‹± int ->Integer
        }

        @Override
        public int size() {
            return a.length;
        }
    };
}

```

- λ°•μ‹±, μ–Έλ°•μ‹±
  
![image](https://github.com/CS-conqueror/Effective-Java/assets/107859104/881fca30-0aa2-482e-88d7-3e99b444bde3)    

### κ³¨κ²© κµ¬ν„ μ‘μ„±ν•λ”λ²•

κΈ°λ° λ©”μ„λ“: ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄μ—μ„ μ¶”μƒ ν΄λμ¤μ— μ •μλ λ©”μ„λ“

1. **μΈν„°νμ΄μ¤λ¥Ό μ‚΄ν΄ λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ κµ¬ν„μ— μ‚¬μ©λλ” κΈ°λ° λ©”μ„λ“λ¥Ό μ„ μ •ν•λ‹¤.**
2. **κ³¨κ²© κµ¬ν„μ—μ„ κΈ°λ°λ©”μ„λ“κ°€ μ¶”μƒλ©”μ„λ“κ°€ λλ‹¤.**
3. **κΈ°λ° λ©”μ„λ“λ“¤μ„ μ‚¬μ©ν•΄ μ§μ ‘ κµ¬ν„ν•  μ μλ” λ©”μ„λ“λ” λ¨λ‘ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•λ‹¤.**

 equals, hashcodeμ™€ κ°™μ€ Object ν΄λμ¤μ λ©”μ„λ“λ” λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•λ©΄ μ• λλ‹¤λ” κ±Έ μ λ…ν•μ.

1. **λ§μ•½ μΈν„°νμ΄μ¤μ λ©”μ„λ“ λ¨λ‘κ°€ κΈ°λ° λ©”μ„λ“λ‚ λ””ν΄νΈ λ©”μ„λ“κ°€ λλ‹¤λ©΄, κµ³μ΄ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό λ§λ“¤ ν•„μ”κ°€ μ—†λ‹¤.**

κΈ°λ° λ©”μ„λ“λ‚ λ””ν΄νΈ λ©”μ„λ“λ΅ λ§λ“¤μ§€ λ»ν• λ©”μ„λ“κ°€ λ‚¨μ•„μλ‹¤λ©΄, μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν•λ‚ λ§λ“¤μ–΄ λ‚¨μ€ λ©”μ„λ“λ¥Ό μ‘μ„±ν•΄ λ„£λ”λ‹¤.

ex) Map.Entry κ³¨κ²© κµ¬ν„ ν΄λμ¤

getKey, getValueλ” ν™•μ‹¤ν κΈ°λ°λ©”μ„λ“μ΄κ³  μ„ νƒμ μΌλ΅ setValueλ¥Ό ν¬ν•¨ν•  μ μλ‹¤. μ΄ μΈν„°νμ΄μ¤λ” equals, hashCodeμ λ™μ‘λ°©μ‹λ„ μ •μν•΄λ†¨λ‹¤. Objectλ©”μ„λ“λ“¤μ€ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•΄μ„λ” μ• λλ―€λ΅, ν•΄λ‹Ή λ©”μ„λ“λ“¤μ€ λ¨λ‘ κ³¨κ²© κµ¬ν„ ν΄λμ¤μ— κµ¬ν„ν•λ‹¤. toStringλ„ κΈ°λ° λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄ κµ¬ν„ν•΄λ†¨λ‹¤.

```java
public abstract class AbstractMapEntry<K, V> implements Map.Entry<K, V> {

    // λ³€κ²½ κ°€λ¥ν• μ—”νΈλ¦¬λ” μ΄ λ©”μ„λ“λ¥Ό λ°λ“μ‹ μ¬μ •μν•΄μ•Ό ν•λ‹¤.
    @Override
    public V setValue(V value) {
        throw new UnsupportedOperationException();
    }

    // Map.Entry.equalsμ μΌλ° κ·μ•½μ„ κµ¬ν„ν•λ‹¤.
    @Override
    public boolean equals(Object o) {
        if (o == this)
            return false;
        if (!(o instanceof Map.Entry))
            return false;
        Map.Entry<?, ?> e = (Map.Entry<?, ?>) o;
        return Objects.equals(e.getKey(), getKey())
                && Objects.equals(e.getValue(), getValue());
    }

    // Map.Entry.hashCodeμ μΌλ° κ·μ•½μ„ κµ¬ν„ν•λ‹¤.
    @Override
    public int hashCode() {
        return Objects.hashCode(getKey()) ^ Objects.hashCode(getValue());
    }

    @Override
    public String toString() {
        return getKey() + "=" + getValue();
    }
}

```

Map.EntryμΈν„°νμ΄μ¤λ‚ κ·Έ ν•μ„ μΈν„°νμ΄μ¤λ΅λ” μ΄ κ³¨κ²© κµ¬ν„μ„ μ κ³µν•  μ μ—†μ.

β†’ λ””ν΄νΈ λ©”μ„λ“λ” equals, hashCode, toStringκ°™μ€ Object λ©”μ„λ“λ¥Ό μ¬μ •μ λ¶κ°€λ¥ν•¨.

### κ²°λ΅ 

- μΌλ°μ μΌλ΅ λ‹¤μ¤‘ κµ¬ν„μ© νƒ€μ…μ—λ” μΈν„°νμ΄μ¤κ°€ κ°€μ¥ μ ν•©ν•λ‹¤.
- λ³µμ΅ν• μΈν„°νμ΄μ¤λΌλ©΄ κ³¨κ²© κµ¬ν„μ„ ν•¨κ» μ κ³µν•λ” λ°©λ²•μ„ κ³ λ ¤ν•μ.
- κ³¨κ²© κµ¬ν„μ€ 'κ°€λ¥ν•' μΈν„°νμ΄μ¤μ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•μ—¬ κ·Έ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• λ¨λ“  κ³³μ—μ„ ν™μ©ν•λ„λ΅ ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.
- μΈν„°νμ΄μ¤μ— κ±Έλ ¤μλ” κµ¬ν„μƒ μ μ•½ λ•λ¬Έμ— κ³¨κ²© κµ¬ν„μ„ μ¶”μƒ ν΄λμ¤λ΅ μ κ³µν•λ” κ²½μ°κ°€ λ” ν”ν•λ‹¤.
