## λ””ν΄νΈ λ©”μ„λ“

- μλ°” 8 μ΄μ „μ—λ” κΈ°μ΅΄ κµ¬ν„μ²΄λ¥Ό κΉ¨λ¨λ¦¬μ§€ μ•κ³ λ” μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  λ°©λ²•μ΄ μ—†μ—λ‹¤.
    - μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ©΄ λ³΄ν†µμ€ μ»΄νμΌ μ¤λ¥κ°€ λ‚λ”λ°, μ¶”κ°€λ λ©”μ„λ“κ°€ κΈ°μ΅΄ κµ¬ν„μ²΄μ— μ΅΄μ¬ν•  κ°€λ¥μ„±μ΄ μ•„μ£Ό λ‚®κΈ° λ•λ¬Έμ΄λ‹¤.

```java
// κΈ°μ΅΄ κµ¬ν„μ²΄
public class MyClass implements MyInterface {
    @Override
    public void existingMethod() {
        // κµ¬ν„ μ½”λ“
    }
}

// MyInterfaceμ— μƒ λ©”μ„λ“ μ¶”κ°€ (μλ°” 8 μ΄μ „μ—λ” μ»΄νμΌ μ¤λ¥ λ°μƒ)
public interface MyInterface {
    void existingMethod();
    void newMethod(); // μ΄ λ©”μ„λ“λ¥Ό κµ¬ν„ μ•ν–μΌλ―€λ΅, MyClassμ—μ„ μ¤λ¥λ°μƒ 
```

- μλ°” 8 μ΄ν›„λ¶€ν„° κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  μ μλ„λ΅ λ””ν΄νΈ λ©”μ„λ“κ°€ μ¶”κ°€λμ—λ‹¤.

```java
public interface MyInterface {
    void existingMethod();
    
    // λ””ν΄νΈ λ©”μ„λ“ μ¶”κ°€
    default void newMethod() {
        // κΈ°λ³Έ κµ¬ν„ μ½”λ“
    }
}

// κΈ°μ΅΄ κµ¬ν„μ²΄
public class MyClass implements MyInterface {
    @Override
    public void existingMethod() {
        // κµ¬ν„ μ½”λ“
    }
    // newMethodλ¥Ό κµ¬ν„ν•μ§€ μ•μ•„λ„ μ»΄νμΌ μ¤λ¥ μ—†μ
}

```

- λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ„ μ–Έν•λ©΄, κ·Έ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν›„ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¬μ •μν•μ§€ μ•μ€ λ¨λ“  ν΄λμ¤μ—μ„ λ””ν΄νΈ κµ¬ν„μ΄ μ“°μ΄κ² λλ‹¤.
    - λ””ν΄νΈ λ©”μ„λ“λ” κµ¬ν„ ν΄λμ¤μ— λ€ν•΄ μ•„λ¬΄κ²ƒλ„ λ¨λ¥Έ μ±„ ν•©μ μ—†μ΄ λ¬΄μ‘μ • 'μ‚½μ…'λ  λΏμ΄λ―€λ΅ μ£Όμν•΄μ•Ό ν•λ‹¤.
- μλ°” 8μ—μ„λ” ν•µμ‹¬ μ»¬λ ‰μ… μΈν„°νμ΄μ¤λ“¤μ— λ‹¤μμ λ””ν΄νΈ λ©”μ„λ“κ°€ μ¶”κ°€λμ—λ‹¤. μ΄λ” μ£Όλ΅ λλ‹¤λ¥Ό ν™μ©ν•κΈ° μ„ν•΄μ„λ‹¤.
- μλ°” λΌμ΄λΈλ¬λ¦¬μ λ””ν΄νΈ λ©”μ„λ“λ” μ½”λ“ ν’μ§μ΄ λ†’κ³  λ²”μ©μ μ΄λΌ λ€λ¶€λ¶„μ μƒν™©μ—μ„ μ μ‘λ™ν•μ§€λ§,Β **μƒκ°ν•  μ μλ” λ¨λ“  μƒν™©μ—μ„ λ¶λ³€μ‹μ„ ν•΄μΉμ§€ μ•λ” λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ‘μ„±ν•λ” κ²ƒμ€ μ–΄λ µλ‹¤.**

### **μλ°” 8μ Collection μΈν„°νμ΄μ¤μ— μ¶”κ°€λ λ””ν΄νΈ λ©”μ„λ“**

```java
default boolean removeIf(predicate<? super E> filter) {
  Objects.requireNonNull(filter);
  boolean result = false;
  for (Iterator<E> it = iterator(); it.hasNext(); ) {
    if (filter.test(it.next())) {
      it.remove();
      result = true;
    }
  return result;
}
```

μ΄ λ©”μ„λ“λ” `Iterator`λ¥Ό ν†µν•΄ μ»¬λ ‰μ…μ μ”μ†λ“¤μ„ νƒμƒ‰ν•κ³ , μ΅°κ±΄μ— λ§λ” μ”μ†λ¥Ό μ κ±°ν•©λ‹λ‹¤. 

### λ¬Έμ λ” μ΄ κ³Όμ •μ—μ„ λ™κΈ°ν™”(synchronization)κ°€ μ΄λ£¨μ–΄μ§€μ§€ μ•λ”λ‹¤λ” μ μ…λ‹λ‹¤.

**SynchronizedCollectionκ³Όμ μ¶©λ**

<aside>
π’΅

### SynchronizedCollectionμ΄λ€?

μ¤λ λ“ μ•μ „μ„±μ„ μ κ³µν•κΈ° μ„ν•΄ λ¨λ“  λ©”μ„λ“μ—μ„ νΉμ • λ½ κ°μ²΄λ΅ λ™κΈ°ν™”(sync)ν•λ” μ»¬λ ‰μ… λνΌμ…λ‹λ‹¤. μ΄λ” μ—¬λ¬ μ¤λ λ“κ°€ λ™μ‹μ— μ»¬λ ‰μ…μ— μ ‘κ·Όν•  λ• μΌκ΄€μ„±κ³Ό λ°μ΄ν„° λ¬΄κ²°μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤.

***μ¤λ λ“**: ν”„λ΅μ„Έμ¤μ•μ—μ„ μ‹¤μ§μ μΌλ΅ μ‘μ—…μ„ μ‹¤ν–‰ν•λ” λ‹¨μ„

</aside>

λ”°λΌμ„ SynchronizedCollection μΈμ¤ν„΄μ¤λ¥Ό λ©€ν‹°μ¤λ λ“ ν™κ²½μ—μ„ μ—¬λ¬ μ¤λ λ“κ°€ λ™μ‹μ— μ»¬λ ‰μ…μ— μ ‘κ·Όν•κ±°λ‚ μμ •ν•  κ²½μ° `concurrentModificationException`μ΄ λ°μƒν•κ±°λ‚ λ‹¤λ¥Έ μκΈ°μΉ λ»ν• κ²°κ³Όλ΅ μ΄μ–΄μ§ μ μλ‹¤.

`SynchronizedCollection` ν΄λμ¤λ” `removeIf` λ©”μ„λ“λ¥Ό μ¬μ •μν•μ—¬ λ™κΈ°ν™”λ¥Ό μ²λ¦¬ν•λ‹¤.

### **λ””ν΄νΈ λ©”μ„λ“ νΈν™μ„±μ„ μ μ§€ν•κΈ° μ„ν• λ°©λ²•**

μλ°” ν”λ«νΌ λΌμ΄λΈλ¬λ¦¬ μ—μ„λ„ μ΄λ° λ¬Έμ λ¥Ό `μλ°©`ν•κΈ° μ„ν•΄ μΌλ ¨μ μ΅°μΉλ¥Ό μ·¨ν–λ‹¤. μλ¥Ό λ“¤μ–΄ κµ¬ν„ν• μΈν„°νμ΄μ¤μ λ””ν΄νΈ λ©”μ„λ“λ¥Ό `μ¬μ •μ`ν•κ³ , λ‹¤λ¥Έ λ©”μ„λ“ μ—μ„λ” λ””ν΄νΈ λ©”μ„λ“λ¥Ό νΈμ¶ν•κΈ° μ „μ— `ν•„μ”ν• μ‘μ—…`μ„ μν–‰ν•λ„λ΅ ν–λ‹¤.

μμ»¨λ€ Collections.synchronizedCollectionμ΄ λ°ν™ν•λ” `package-private` ν΄λμ¤ λ“¤μ€ `removeIf`λ¥Ό `μ¬μ •μ`ν•κ³ , μ΄λ¥Ό νΈμ¶ν•λ” λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ€ λ””ν΄νΈ κµ¬ν„μ„ νΈμ¶ν•κΈ° μ „μ— `λ™κΈ°ν™”`λ¥Ό ν•λ„λ΅ ν–λ‹¤.

```java
public class SynchronizedCollection<E> implements Collection<E>, Serializable {
    ...

    /**
    * @since 4.4
    */
    @Override
    public boolean removeIf(final Predicate<? super E> filter) {
        synchronized (lock) {
            return decorated().removeIf(filter);
        }
    }
}
```

μ΄ λ‹¨κ³„μ—μ„ λ‹¤λ¥Έ μ¤λ λ“κ°€ `removeIf`λ¥Ό νΈμ¶ν•κ±°λ‚ μ»¬λ ‰μ…μ„ μμ •ν•λ ¤κ³  ν•λ©΄, ν•΄λ‹Ή μ¤λ λ“λ” `lock`μ΄ ν•΄μ λ  λ•κΉμ§€ λ€κΈ° μƒνƒκ°€ λ©λ‹λ‹¤.

λ””ν΄νΈ λ©”μ„λ“λ” (μ»΄νμΌμ— μ„±κ³µν•λ”λΌλ„) κΈ°μ΅΄ κµ¬ν„μ²΄μ— λ°νƒ€μ„ μ¤λ¥λ¥Ό μΌμΌν‚¬ μ μλ‹¤. μλ°” 8μ€ μ»¬λ ‰μ… μΈν„°νμ΄μ¤μ— κ½¤ λ§μ€ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¶”κ°€ν–κ³ , κ·Έ κ²°κ³Ό κΈ°μ΅΄μ— μ§μ—¬μ§„ λ§μ€ μλ°” μ½”λ“κ°€ μν–¥μ„ λ°›μ€ κ²ƒμΌλ΅ μ•λ ¤μ΅λ‹¤.

λ””ν΄νΈ λ©”μ„λ“λ” μΈν„°νμ΄μ¤λ΅λ¶€ν„° λ©”μ„λ“λ¥Ό `μ κ±°`ν•κ±°λ‚ κΈ°μ΅΄ λ©”μ„λ“μ μ‹κ·Έλ‹μ²λ¥Ό `μμ •`ν•λ” μ©λ„κ°€ μ•„λ‹μ„ λ…μ‹¬ν•΄μ•Ό ν•λ‹¤. μ΄λ° ν•νƒλ΅ μΈν„°νμ΄μ¤λ¥Ό λ³€κ²½ν•λ©΄ λ°λ“μ‹ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ§κ°€λ¨λ¦¬κ² λλ‹¤.

### μ •λ¦¬

**μƒλ΅μ΄ μΈν„°νμ΄μ¤λΌλ©΄ λ¦΄λ¦¬μ¤ μ „μ— λ°λ“μ‹ ν…μ¤νΈλ¥Ό κ±°μ³μ•Ό ν•λ‹¤.** 

**μΈν„°νμ΄μ¤λ¥Ό λ¦΄λ¦¬μ¤ν• ν›„λΌλ„ κ²°ν•¨μ„ μμ •ν•λ” κ² κ°€λ¥ν• κ²½μ°λ„ μκ² μ§€λ§, μ λ€ κ·Έ κ°€λ¥μ„±μ— κΈ°λ€μ„λ” μ• λλ‹¤.**
