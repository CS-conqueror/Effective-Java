> item 47. ë°˜í™˜ íƒ€ì…ìœ¼ë¡œëŠ” ìŠ¤íŠ¸ë¦¼ë³´ë‹¤ ì»¬ë ‰ì…˜ì´ ë‚«ë‹¤
> 

## [**Java8 ì´í›„ ì›ì†Œ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ë°©ë²•**](https://jake-seo-dev.tistory.com/459#Java-%--%EC%-D%B-%ED%-B%--%--%EC%-B%--%EC%--%-C%--%EC%-B%-C%ED%--%--%EC%-A%A-%EB%A-%BC%--%EB%B-%--%ED%--%--%ED%--%--%EB%-A%--%--%EB%B-%A-%EB%B-%--)

- ê¸°ì¡´ì—ëŠ”Â `Collection`,Â `Iterable`Â ì´ë¼ëŠ” ì„ íƒì§€ê°€ ì¡´ì¬í–ˆë‹¤.
- Java8 ì´í›„ë¡œëŠ”Â `Stream`Â ì´ë¼ëŠ” ì„ íƒì§€ê°€ í•˜ë‚˜ ë” ëŠ˜ì—ˆë‹¤.
- `Stream`Â ì€ ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°ë³´ë‹¤ëŠ” ë‹¨ìˆœíˆ ì»¬ë ‰ì…˜ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- ë°˜í™˜ì€ ë‹¤ì‹œ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë³€ê²½í•´ì£¼ëŠ” ê²ƒì´ í™œìš©ì„±ì´ ì¢‹ë‹¤.
    - `someStream.collect(Collectors.toList())`Â ì™€ ê°™ì€ í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë©´ ì‰½ë‹¤.
    
    ### ìŠ¤íŠ¸ë¦¼ì€ ë°˜ë³µ(iteration)ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.
    
    ìŠ¤íŠ¸ë¦¼ì€Â **ë°˜ë³µ(iteration)**ì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì›ì†Œ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜í• ë•Œ ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì´Â `for-each`Â ë¡œ ë°˜ë³µì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤.
    
    ```java
    static Stream<ProcessHandle> allProcesses()
    
    // Stream.iterator ì‚¬ìš©
    for(ProcessHandle p: ProcessHandle.allProcesses.iterator()) {
    
    }
    ```
    
    `for-each`Â ì™€ ê°™ì´ í–¥ìƒëœ for ë¬¸ì´ ê°€ëŠ¥í•œ ì»¬ë ‰ì…˜ì€Â `Iterable`Â ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.Â 
    
    Stream ì¸í„°í˜ì´ìŠ¤ëŠ” Iterable ì¸í„°í˜ì´ìŠ¤ê°€ ì •ì˜í•œ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì „ë¶€ í¬í•¨í•  ë¿ë§Œ ì•„ë‹ˆë¼, Iterable ì¸í„°í˜ì´ìŠ¤ê°€ ì •ì˜í•œ ë°©ì‹ëŒ€ë¡œ ë™ì‘í•œë‹¤.í•˜ì§€ë§Œ `Stream`Â ì¸í„°í˜ì´ìŠ¤ëŠ”Â `Iterable`ì„ **í™•ì¥(extend)**Â í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë°˜ë³µì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
    
    ```java
    
    ```
    
    ê·¸ë ‡ë‹¤ë©´ ìŠ¤íŠ¸ë¦¼ì„ ë°˜ë³µí•  ìˆ˜ ìˆê²Œ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?
    
    ### â˜ï¸ ì–´ëŒ‘í„°(Adapter)
    
    ### 1) Stream -> Iterable
    
    `Stream<E>`Â ë¥¼Â `Iterable<E>`Â ë¡œ ì¤‘ê°œí•´ì£¼ëŠ” ì–´ëŒ‘í„°ì´ë‹¤.
    
    ```java
    public static <E> Iterable<E> iterableOf(Stream<E> stream) {
            return stream::iterator;
    }
    ```
    
    ```java
    for(ProcessHandle p : iterableOf(ProcessHandle.allProcesses())){
    }
    ```
    
    ì–´ëŒ‘í„°ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ì–´ë–¤ ìŠ¤íŠ¸ë¦¼ë„Â `for-each`Â ë¬¸ìœ¼ë¡œ ë°˜ë³µí•  ìˆ˜ ìˆë‹¤. ì°¸ê³ ë¡œ ìë°”ì˜ íƒ€ì… ì¶”ë¡ ì´ ë¬¸ë§¥ì„ ì˜ íŒŒì•…í•˜ê¸° ë•Œë¬¸ì— ì–´ëŒ‘í„° ë©”ì„œë“œ ì•ˆì—ì„œ ë”°ë¡œ í˜•ë³€í™˜ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
    
    ### 2) Iterable -> Stream
    
    ë°˜ëŒ€ë¡œÂ `Iterable<E>`Â ë¥¼Â `Stream<E>`Â ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì–´ëŒ‘í„°ë„ ë‹¤ìŒê³¼ ê°™ì´ ì‰½ê²Œ êµ¬í˜„ ê°€ëŠ¥í•˜ë‹¤.
    
    ```java
    public static <E> Stream<E> streamOf(Iterable<E> iterable) {
           return StreamSupport.stream(iterable.spliterator(), false);
    }
    ```
    
    ### â˜ï¸ Collection ì¸í„°í˜ì´ìŠ¤
    
    ê°ì²´ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë¥¼ í•  ë•Œ, ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ê³¼ ë°˜ë³µë¬¸ ë‘˜ ì¤‘ì— í•œ ë°©ì‹ë§Œ ì‚¬ìš©í•  ê±°ë¼ëŠ” ê·¼ê±°ê°€ ì—†ìœ¼ë¯€ë¡œ ì–´ëŒ‘í„°ë¥¼ ì“°ê¸° ì• ë§¤í•˜ë‹¤.
    
    í•˜ì§€ë§ŒÂ `Collection`Â ì¸í„°í˜ì´ìŠ¤ëŠ”Â `Iterable`ì˜ í•˜ìœ„ íƒ€ì…ì´ê³ Â `stream`Â ë©”ì„œë“œë„ ì œê³µí•˜ë‹ˆÂ **ë°˜ë³µê³¼ ìŠ¤íŠ¸ë¦¼ì„ ë™ì‹œì— ì§€ì›**í•œë‹¤. ë”°ë¼ì„œÂ **ì›ì†Œ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ê³µê°œ APIì˜ ë°˜í™˜ íƒ€ì…**ì—ëŠ”Â `Collection`Â ì´ë‚˜ ê·¸ í•˜ìœ„ íƒ€ì…ì„ ì“°ë„ë¡ í•˜ì.
    
    ```java
    public interface Collection<E> extends Iterable<E> {
        ...
        default Stream<E> stream() {
            return StreamSupport.stream(spliterator(), false);
        }
    
        default Stream<E> parallelStream() {
            return StreamSupport.stream(spliterator(), true);
        }
    }
    ```
    
    ### Collection íƒ€ì…ì´ ë‚˜ì€ ê²½ìš°
    
    > ì›ì†Œ ì‚¬ì´ì¦ˆê°€ ì‘ì€ ê²½ìš° : í‘œì¤€ ì»¬ë ‰ì…˜ì›ì†Œ ì‚¬ì´ì¦ˆê°€ í° ê²½ìš° : ì „ìš© ì»¬ë ‰ì…˜ êµ¬í˜„
    > 
    
    ë°˜í™˜í•  ì‹œí€€ìŠ¤ê°€ í¬ì§€ë§Œ í‘œí˜„ì„ ê°„ê²°í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤ë©´, ì „ìš© ì»¬ë ‰ì…˜ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
    
    > ë©±ì§‘í•©: ëª¨ë“  ë¶€ë¶„ì§‘í•©ë¥¼ ì›ì†Œë¡œ í•˜ëŠ” ì§‘í•©
    > 
    
    ë‹¤ìŒì˜ ì˜ˆì œë¥¼ ë³´ë©´, ë©±ì§‘í•©ì˜ ê²½ìš° ì›ì†Œì˜ ê°œìˆ˜ê°€Â `n`ê°œì¼ë•Œ ë©±ì§‘í•©ì˜ ì›ì†Œ ê°œìˆ˜ëŠ”Â `2^n`Â ê°œê°€ ë˜ë¯€ë¡œ, í‘œì¤€ ì»¬ë ‰ì…˜ êµ¬í˜„ì²´ì— ì €ì¥í•˜ë©´ ìœ„í—˜í•˜ë‹¤. ë”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì´Â `AbstractList`Â ë¥¼ ì´ìš©í•´ì„œ ê° ì›ì†Œì˜ ì¸ë±ìŠ¤ë¥¼ ë¹„íŠ¸ ë§ˆìŠ¤í‚¹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤. 
    
    > ğŸ”– {a, b, c} ì˜ ë©±ì§‘í•© í‘œí˜„í•˜ê¸°
    > 
    > 
    > ```
    > 000 : {}
    > 001 : {a}
    > ...
    > 111 : {a, b, c}
    > ```
    > 
    
    ```java
    public class PowerSet {
        public static final <E> Collection<Set<E>> of(Set<E> s) {
            List<E> src = new ArrayList<>(s);
            if (src.size() > 30)
                throw new IllegalArgumentException(
                    "ì§‘í•©ì— ì›ì†Œê°€ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤(ìµœëŒ€ 30ê°œ).: " + s);
    
            return new AbstractList<Set<E>>() {
                @Override public int size() {
                    // ë©±ì§‘í•©ì˜ í¬ê¸°ëŠ” 2ë¥¼ ì›ë˜ ì§‘í•©ì˜ ì›ì†Œ ìˆ˜ë§Œí¼ ê±°ë“­ì œê³± ê²ƒê³¼ ê°™ë‹¤.
                    return 1 << src.size();
                }
    
                @Override public boolean contains(Object o) {
                    return o instanceof Set && src.containsAll((Set)o);
                }
    
    			// ì¸ë±ìŠ¤ n ë²ˆì§¸ ë¹„íŠ¸ ê°’ : í•´ë‹¹ ì›ì†Œê°€ ì›ë˜ ì§‘í•©ì˜ n ë²ˆì§¸ ì›ì†Œë¥¼ í¬í•¨í•˜ëŠ”ì§€ ì—¬ë¶€
                @Override public Set<E> get(int index) {
                    Set<E> result = new HashSet<>();
                    for (int i = 0; index != 0; i++, index >>= 1)
                        if ((index & 1) == 1)
                            result.add(src.get(i));
                    return result;
                }
            };
        }
    }
    ```
    
    ### ìŠ¤íŠ¸ë¦¼ ì‚¬ìš©ì´ ë” ë‹ˆì€ ê²½ìš°
    
    ì…ë ¥ ë¦¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ë‹¤.
    
    ì¼ë°˜ì ìœ¼ë¡œÂ `O(N^2)`Â ì„±ëŠ¥ì´ ë‚˜ì˜¤ëŠ” ì´ì¤‘ ë°˜ë³µë¬¸ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ì´ë ‡ê²Œ ë˜ë©´ í•´ë‹¹ ì»¬ë ‰ì…˜ì€ ì…ë ¥ ë¦¬ìŠ¤íŠ¸ í¬ê¸°ì˜ ê±°ë“­ì œê³±ë§Œí¼ ë©”ëª¨ë¦¬ë¥¼ ì°¨ì§€í•˜ê²Œ ëœë‹¤.
    
    ```java
    for (int start = 0; start < src.size(); start++) {
    	for (int end = start + 1; end <= src.size(); end++) {
        	System.out.println(src.subList(start, end));
        }
    }
    ```
    
    ëª¨ë“  ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ë¥¼Â `prefix + suffix + {}`Â ë¡œ ë¶„ë¦¬í•´ì„œ ë³¼ ìˆ˜ ìˆëŠ”ë°, ì´ëŠ” ìŠ¤íŠ¸ë¦¼ì„ í†µí•´ ê°€ë…ì„± ì¢‹ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
    
    - ì²« ë²ˆì§¸ ì›ì†Œë¥¼ í¬í•¨í•˜ëŠ” ë¶€ë¶„ë¦¬ìŠ¤íŠ¸ë¥¼ ê·¸ ë¦¬ìŠ¤íŠ¸ì˜ prefixë¼ í•´ë³´ì.
        - (a, b, c)ì˜ prefixëŠ” (a), (a, b), (a, b, c)ê°€ ëœë‹¤.
    - ê°™ì€ ì‹ìœ¼ë¡œ ë§ˆì§€ë§‰ ì›ì†Œë¥¼ í¬í•¨í•˜ëŠ” ë¶€ë¶„ë¦¬ìŠ¤íŠ¸ë¥¼ ê·¸ ë¦¬ìŠ¤íŠ¸ì˜ suffixë¼ í•˜ì.
        - (a, b, c)ì˜ suffixëŠ” (a, b, c), (b, c), (c)ê°€ ëœë‹¤.
    - ì–´ë–¤ ë¦¬ìŠ¤íŠ¸ì˜ ë¶€ë¶„ë¦¬ìŠ¤íŠ¸ëŠ” ë‹¨ìˆœíˆ ê·¸ ë¦¬ìŠ¤íŠ¸ì˜ prefixì˜ suffix(í˜¹ì€ suffixì˜ prefix)ì— ë¹ˆ ë¦¬ìŠ¤íŠ¸ í•˜ë‚˜ë§Œ ì¶”ê°€í•˜ë©´ ëœë‹¤.
    
    ```java
    public class SubLists {
        public static <E> Stream<List<E>> of(List<E> list) {
            return Stream.concat(Stream.of(Collections.emptyList()),
                    prefixes(list).flatMap(SubLists::suffixes));
        }
    
        private static <E> Stream<List<E>> prefixes(List<E> list) { // (a), (a,b), (a,b,c)
            return IntStream.rangeClosed(1, list.size())
                    .mapToObj(end -> list.subList(0, end));
        }
    
        private static <E> Stream<List<E>> suffixes(List<E> list) { // (a,b,c), (b,c), (c)
            return IntStream.range(0, list.size())
                    .mapToObj(start -> list.subList(start, list.size()));
        }
    }
    ```
    
    - Stream.concat ë©”ì„œë“œëŠ” ë°˜í™˜ë˜ëŠ” ìŠ¤íŠ¸ë¦¼ì— ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶”ê°€
    - flatMap ë©”ì„œë“œëŠ” ëª¨ë“  prefixì— ëŒ€í•œ ëª¨ë“  suffixë¥¼ ì¶”ì¶œí•˜ì—¬ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“¦
    
    **ì½”ë“œ íë¦„ ì •ë¦¬**
    
    1. ê° prefixì— ëŒ€í•´ suffixes ë©”ì„œë“œë¥¼ ì ìš©í•˜ì—¬ í‰íƒ„í™” (flatten)
    
    â€¢ prefix = [a]ì— ëŒ€í•´ suffixes([a])ëŠ” [[a]]ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    â€¢ prefix = [a, b]ì— ëŒ€í•´ suffixes([a, b])ëŠ” [[a, b], [b]]ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    â€¢ prefix = [a, b, c]ì— ëŒ€í•´ suffixes([a, b, c])ëŠ” [[a, b, c], [b, c], [c]]ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    
    1. flatMapì€ ì´ ëª¨ë“  ë¦¬ìŠ¤íŠ¸ë¥¼ í‰íƒ„í™”í•˜ì—¬ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤:
    
    [[a], [a, b], [b], [a, b, c], [b, c], [c]]
    
    1. ë¹ˆ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€
    
    ë§ˆì§€ë§‰ìœ¼ë¡œ, Stream.concat(Stream.of(Collections.emptyList()), ...)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤:
    
    [[], [a], [a, b], [b], [a, b, c], [b, c], [c]]
    
    > ğŸ“šÂ í•µì‹¬ ì •ë¦¬
    > 
    > 
    > ë°˜í™˜ ì „ë¶€í„° ì´ë¯¸ ì›ì†Œë“¤ì„ ì»¬ë ‰ì…˜ì— ë‹´ì•„ ê´€ë¦¬í•˜ê³  ìˆê±°ë‚˜ ì›ì†Œ ê°œìˆ˜ê°€ ì ë‹¤ë©´Â `ArrayList`Â ê³¼ ê°™ì€ í‘œì¤€ ì»¬ë ‰ì…˜ì— ë‹´ì•„ ë°˜í™˜í•˜ì. ê·¸ë ‡ì§€ ì•Šë‹¤ë©´, ì „ìš© ì»¬ë ‰ì…˜ì„ êµ¬í˜„í•  ìˆ˜ë„ ìˆë‹¤. ì»¬ë ‰ì…˜ì„ ë°˜í™˜í•˜ëŠ”ê²Œ ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´ ìŠ¤íŠ¸ë¦¼ê³¼Â `Iterable`Â ì¤‘ ë” ìì—°ìŠ¤ëŸ¬ìš´ ê²ƒì„ ë°˜í™˜í•˜ë©´ ëœë‹¤.
    >